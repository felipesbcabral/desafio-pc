<div 
  class="metric-card" 
  [class]="colorClass"
  [class.metric-card--clickable]="data.clickable"
  [class.metric-card--loading]="data.loading"
  [attr.aria-label]="getAriaLabel()"
  [matTooltip]="tooltip"
  [matTooltipDisabled]="!tooltip"
  (click)="onCardClick()"
  role="button"
  [attr.tabindex]="data.clickable ? 0 : null"
  (keydown.enter)="onCardClick()"
  (keydown.space)="onCardClick()">
  
  <!-- Loading State -->
  <div class="metric-card__loading" *ngIf="data.loading">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <!-- Card Content -->
  <div class="metric-card__content" [class.metric-card__content--hidden]="data.loading">
    <!-- Header -->
    <div class="metric-card__header">
      <div class="metric-card__icon">
        <mat-icon [attr.aria-hidden]="true">{{ data.icon }}</mat-icon>
      </div>
      
      <div class="metric-card__actions" *ngIf="data.clickable">
        <mat-icon class="metric-card__chevron">chevron_right</mat-icon>
      </div>
    </div>

    <!-- Main Content -->
    <div class="metric-card__main">
      <div class="metric-card__title">
        {{ data.title }}
      </div>
      
      <div class="metric-card__value">
        {{ formatValue(data.value) }}
      </div>
      
      <div class="metric-card__subtitle" *ngIf="data.subtitle">
        {{ data.subtitle }}
      </div>
    </div>

    <!-- Trend Indicator -->
    <div class="metric-card__trend" *ngIf="data.trend && !data.loading">
      <div class="trend-indicator" [class]="trendClass">
        <mat-icon class="trend-icon">{{ trendIcon }}</mat-icon>
        <span class="trend-value">{{ data.trend.value }}%</span>
        <span class="trend-label">{{ data.trend.label }}</span>
      </div>
    </div>
  </div>

  <!-- Hover Effect Overlay -->
  <div class="metric-card__overlay" *ngIf="data.clickable"></div>
</div>